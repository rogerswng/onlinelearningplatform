## 数据结构与接口 v1.0  
本文档介绍根据需求定义平台的基础数据结构与接口。同时会进行功能的模块划分，以及数据之间关联性的介绍。
考虑用 MySQL(关系型数据)+Redis(日志型数据)

#### 0 数据结构 (待完善)  
用户 User

Column Name | Data Type | Description
----------- | --------- | -----------
user_id | string | 用户学/工号
password | string | 密码
character | string | 用户角色，学生(0)/老师(1)

学生 Student  

Column Name | Data Type | Description
----------- | --------- | -----------
user_id | string | 学号
tot_learning_time | int | 学习总时长



#### 1 登录

**登录**

URL
> /api/login

返回格式
> JSON

请求方式
> POST

Request

    {
      "user_id": string, // 用户学/工号
      "password": string // 密码
    }

Response  

    {
      "state": int, // 登录返回状态，成功(0)/失败(1)
      "reason": string  // 若错误，则返回失败原因
      "character": int // 返回用户角色，学生(0)/老师(1)，前端重定向
    }

Example  
> POST /api/login?user_id="2014211395"&password="xxxxxx"

    {
      "state": 0,
      "character": 0
    }

> POST /api/login?user_id="2014211395"&password="wrongpassword"

    {
      "state": 1,
      "reason": "用户名/密码错误"
    }

#### 2 课程  
**取课程列表**

URL  
> /api/courseList

返回格式  
> JSON

请求方式  
> GET

Request

    {
      "user_id": string, // 学号
      "character": int,  // 角色代码
      "page": int // 分页页码
    }

Response

    {
      "state": int,  // 查询状态，正常(0)/失败(1)
      "reason": string, // 若失败，失败原因
      "count": int // 返回课程总数
      "page": int // 当前返回的页码, 返回 0 无分页, 返回 >= 1 为当前页面页码
      "courses": [
        {
          "title": string, // 课程名称
          "description": string, // 课程简介
          "teacher": {
            "icon": string, // 老师头像 url
            "name": string // 老师名字
          },
          "last": {
            "title": string, // 上次学到的课程标题，为空为没有学习进度
            "id": string // 课程内容id
          }
        }
      ],  // 学生 fetch 到的课程 List，内部是一个 course Object
      "courses": [
        {
          "title": string, // 课程名称
          "count": [int, int, int], // 主题、小节、练习总数
        }
      ] // 老师 fetch 到的课程 List，内部是 course Object
    }

Example  
> GET /api/courseList?user_id="2014211395"&character=0&page=0

    {
      "state": 0,
      "count": 2,
      "page": 0
      "courses": [
        {
          "title": "Android 应用开发工程师职业规划",
          "description": "本课程主要向大家介绍Android应用开发工程师的职业背景、行业前景、团队中的定位及所需的技能，同时分享Android应用开发的学习方法和路径以及将来的职业规划。",
          "teacher": {
            "icon": "http://static.example.com/asset/icon/teacher_id",
            "name": "老师A"
          },
          "last": {
            "title": "Android 应用开发工程师职业规划",
            "id": "xxxxxxx"
          }
        },
        {
          "title": "Java 语言基础"，
          "description": "desdesdesdes",
          "teacher": {
            "icon": "http://static.example.com/asset/icon/teacher_id",
            "name": "老师A"
          },
          "last": {
            "title": "",
            "id": ""
          }
        }
      ]
    }
